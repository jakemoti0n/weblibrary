/* === 전체 레이아웃 / 책장 크기 === */
.bookshelf-room{
  padding: 10px;
}
.cabinet{
  --shelf-h: clamp(160px, 15vw, 220px);     /* 책 높이(반응형) */
  --book-gap: clamp(6px, 0.9vw, 12px);      /* 책 사이 간격(반응형) */
  width: 100%;                /* 부모 안에서 꽉 채움 */
  max-width: 1300px;          /* 최대 폭 제한 */
  margin: 0 auto;
  box-sizing: border-box; 
  position: relative;
  border-radius: 14px;
  background: linear-gradient(#caa179, #9d6f49);   /* 진한 브라운 → 밝은 오크 */
  box-shadow: 0 10px 20px rgba(0,0,0,.18);
  padding: 12px 16px px;
  overflow: hidden;   /* ✅ 가로 초과 방지 */
}

/* === 뒤판 === */
.backboard{
  position: relative;
  border-radius:10px;
  padding: 26px 30px 23px 26px;
  background-blend-mode:multiply;
  box-shadow: inset 0 10px 16px rgba(0,0,0,.12),
    inset 0 -12px 16px rgba(0,0,0,.16);
  overflow: hidden;
}

.plank{
  background: linear-gradient(#a26e45, #7f5333);
  box-shadow: 0 8px 14px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.22);
}
/* === 큐브 선반 오버레이(장식) === */
.cubby{
  --gap: 16px;                       /* 칸 사이 두께(선반 두께처럼 보임) */
  position: absolute;
  inset: 14px 16px 22px;             /* 프레임 안쪽 여백 */
  z-index: 1;                        /* 책 뒤 */
  pointer-events: none;              /* 장식만, 인터랙션 방해 X */
  border-radius: 8px;
  display: grid;
  grid-template-columns: repeat(var(--cols, 20), 1fr);
  grid-template-rows: repeat(var(--rows, 2), 1fr);
  gap: var(--gap);
  background: linear-gradient(#6b4226,#472915);  /* 선반 프레임 */
  box-shadow:
    inset 0 10px 22px rgba(0,0,0,.45),
    inset 0 -10px 18px rgba(0,0,0,.35);
}

/* 각 칸의 안쪽 벽면(오목한 느낌) */
.cubby > i{
  display: block;
  border-radius: 6px;
  background:
    linear-gradient(180deg, #7d5232 0%, #4f2e19 100%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.05) 0 3px,
                                   rgba(0,0,0,.06) 3px 9px);
  box-shadow:
    inset 0 12px 18px rgba(0,0,0,.35),
    inset 0 -10px 16px rgba(0,0,0,.35),
    inset 6px 0 8px rgba(255,255,255,.08),
    inset -6px 0 8px rgba(0,0,0,.2);
}

/* === 책 영역(앞쪽) === */

/* 3구역 고정 그리드 */
.row{
  position: relative;
  z-index: 2; /* cubby(1)보다 앞 */
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: clamp(20px, 2vw, 28px);
  align-items: end;
}

/* 각 구역은 6칸 그리드 → 선반폭을 정확히 채움 */
.partition{
  display: block;
  position: relative;
}
.books{
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  align-items: end;
  gap: var(--book-gap);
}


/* 중앙 기둥 */
.pillar{
  width:16px; height: var(--shelf-h); border-radius:60px;
  background:
      linear-gradient(90deg,#6b482f 0%, #b48763 12%, #825839 47%, #b48763 86%, #6b482f 100%);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), 0 6px 10px rgba(0,0,0,.25);

  position: absolute; right: -28px; bottom: 0;  /* 구역 오른쪽에 딱 붙이기 */
}

/* 책: 칸 너비를 꽉 채우고, 두께는 scaleX로만 조절 */
.book{
  width: 100%;
  height: var(--shelf-h);
  border-radius: 3px;
  border-left: 3px solid rgba(0,0,0,.18);
  border-right: 1px solid rgba(255,255,255,.55);
  box-shadow: 0 8px 14px rgba(0,0,0,.35);
  transform: rotate(var(--r, 0deg)) scaleX(var(--sx,1));
  transform-origin: bottom center;
  display:flex; align-items:center; justify-content:center;
  position: relative;
  transition: transform .18s ease, box-shadow .18s ease, translate .18s ease;
  overflow: visible;
}
.book:hover{ translate: 0 -18px; box-shadow: 0 14px 22px rgba(0,0,0,.45); }

/* 책등 제본 라인 */
.book::before{
  content:""; position:absolute; top:6px; bottom:6px; left:6px; right:8px;
  background:
    linear-gradient(90deg, rgba(255,255,255,.15) 0 1px, transparent 1px 7px) repeat-x;
  opacity:.35; pointer-events:none;
}

/* 제목(세로) – 높이에 비례해 자동 스케일 */
.spine{
  writing-mode: vertical-rl; text-orientation: mixed;
  font-size: clamp(15px, calc(var(--shelf-h)/14), 16px);
  font-weight: 700; letter-spacing: 1px; color:#2f2a25;
  font-family: 'KyoboHand';
  user-select:none;
}